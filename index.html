<!DOCTYPE html>
<object
  type="text/html"
  data="/.netlify/functions/server"
  style="width:100%;height:100%;"
>
<div id="colors"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
<script>
$(document).ready(function() {
	new Promise(resolve=>{
		// Get the json file based on the offset
		$.getJSON('/.netlify/functions/server/getdate', resolve);
	})
	.then(json=>{
		console.log(json);
		var serverDate = new Date(json.date);
		if (
			serverDate.getFullYear() == 2020 
			&& 
			serverDate.getMonth() == 3
			&&
			serverDate.getDate() == 18
		)
		{
			new Promise(resolve1=>{
				$.getJSON("file-1.json", resolve1);
			})
			.then(json1=>{
				console.log(json1);
				for(var i=0;i<json1;i++) {
					$("#colors").html("");
					$("#colors").append("<div>" + json1[i] + "</div>");
				}
			});
		}
	});
});
</script>